<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gcet Notes - AI Notes</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
  <!-- Header -->
  <header class="bg-white shadow p-4 flex justify-between items-center">
    <h1 class="text-xl font-bold text-indigo-600">üìí Gcet Notes</h1>
    <button class="bg-indigo-600 text-white px-4 py-2 rounded">Sign In</button>
  </header>

  <main class="flex flex-col lg:flex-row flex-1 p-6 gap-6">
    <!-- Create a New Note -->
    <section class="bg-white shadow rounded-lg p-6 flex-1">
      <h2 class="text-lg font-semibold mb-4">Create a New Note</h2>
      <input id="noteTitle" placeholder="Note Title" class="w-full border p-2 rounded mb-3"/>
      <textarea id="userInput" placeholder="Start writing your amazing note..."
        class="w-full border p-3 rounded mb-3 h-40"></textarea>
      <div class="flex gap-3 mb-3">
        <input id="noteCategory" placeholder="Category (e.g., Work, Study)" class="flex-1 border p-2 rounded"/>
        <input id="noteTags" placeholder="Tags (comma-separated)" class="flex-1 border p-2 rounded"/>
      </div>
      <button onclick="saveNote()" class="bg-green-600 text-white px-4 py-2 rounded">Save Note</button>
    </section>

    <!-- Sidebar: AI Actions + My Notes -->
    <aside class="lg:w-1/3 flex flex-col gap-6">
      <!-- AI Actions -->
      <div class="bg-white shadow rounded-lg p-6">
        <h2 class="text-lg font-semibold mb-4">AI Actions</h2>
        <div class="grid grid-cols-2 gap-3">
          <button onclick="callGemini('summary')" class="px-3 py-2 bg-blue-100 text-blue-600 rounded">Summarize</button>
          <button onclick="callGemini('quiz')" class="px-3 py-2 bg-purple-100 text-purple-600 rounded">Create Quiz</button>
          <button onclick="callGemini('enhance')" class="px-3 py-2 bg-green-100 text-green-600 rounded">Enhance Text</button>
          <button onclick="callGemini('title')" class="px-3 py-2 bg-orange-100 text-orange-600 rounded">Gen. Title</button>
        </div>
      </div>

      <!-- My Notes -->
      <div class="bg-white shadow rounded-lg p-6 flex-1">
        <h2 class="text-lg font-semibold mb-4">My Notes</h2>
        <input id="searchNotes" oninput="renderNotes()" placeholder="Search notes..."
          class="w-full border p-2 rounded mb-4"/>
        <div id="notesList" class="space-y-3"></div>
      </div>
    </aside>
  </main>

  <!-- Output Section -->
  <section class="bg-white shadow rounded-lg p-6 m-6">
    <h2 class="text-lg font-semibold mb-2">AI Output</h2>
    <pre id="output" class="whitespace-pre-wrap bg-gray-50 p-3 rounded h-40 overflow-y-auto"></pre>
  </section>

  <script>
    const API_KEY = "AIzaSyBujjhO1Win38Md1K_rsNVO65Wi4INwIqM"; // ‚úÖ Your Gemini API key
    let notes = JSON.parse(localStorage.getItem("gcetNotes") || "[]");

    // Call Gemini API
    async function callGemini(type) {
      const input = document.getElementById("userInput").value;
      let prompt = "";
      switch(type) {
        case "title": prompt = `Suggest a short and clear title for this text:\n\n${input}`; break;
        case "enhance": prompt = `Enhance and polish this text for clarity and style:\n\n${input}`; break;
        case "summary": prompt = `Summarize this text in simple points:\n\n${input}`; break;
        case "quiz": prompt = `Create 5 quiz questions with answers based on this text:\n\n${input}`; break;
      }

      document.getElementById("output").innerText = "‚è≥ Generating...";

      try {
        const response = await fetch(
          "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=" + API_KEY,
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              contents: [{ parts: [{ text: prompt }] }]
            })
          }
        );
        const data = await response.json();
        const text = data.candidates?.[0]?.content?.parts?.[0]?.text || "‚ùå No response";
        document.getElementById("output").innerText = text;
      } catch (err) {
        document.getElementById("output").innerText = "Error: " + err.message;
      }
    }

    // Save a note
    function saveNote() {
      const title = document.getElementById("noteTitle").value || "Untitled";
      const text = document.getElementById("userInput").value;
      const category = document.getElementById("noteCategory").value;
      const tags = document.getElementById("noteTags").value;

      if (!text.trim()) {
        alert("Please enter note content!");
        return;
      }

      notes.push({
        id: Date.now(),
        title, text, category, tags,
        date: new Date().toLocaleDateString()
      });

      localStorage.setItem("gcetNotes", JSON.stringify(notes));
      renderNotes();
      document.getElementById("noteTitle").value = "";
      document.getElementById("userInput").value = "";
      document.getElementById("noteCategory").value = "";
      document.getElementById("noteTags").value = "";
    }

    // Render notes list
    function renderNotes() {
      const search = document.getElementById("searchNotes").value.toLowerCase();
      const container = document.getElementById("notesList");
      container.innerHTML = "";

      notes
        .filter(n => n.title.toLowerCase().includes(search) || n.text.toLowerCase().includes(search))
        .forEach(note => {
          const div = document.createElement("div");
          div.className = "p-3 border rounded flex justify-between items-start";
          div.innerHTML = `
            <div>
              <p class="font-semibold">${note.title}</p>
              <p class="text-sm text-gray-600 truncate">${note.text}</p>
              <p class="text-xs text-gray-400">${note.date}</p>
            </div>
            <button onclick="deleteNote(${note.id})" class="text-red-500">üóëÔ∏è</button>
          `;
          container.appendChild(div);
        });
    }

    // Delete a note
    function deleteNote(id) {
      notes = notes.filter(n => n.id !== id);
      localStorage.setItem("gcetNotes", JSON.stringify(notes));
      renderNotes();
    }

    renderNotes();
  </script>
</body>
</html>
